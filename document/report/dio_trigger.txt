#this is a testing report of DIO trigger situation
#we link DIO to raspberry pi to test the minimal register voltage
#input voltage source:5.25v 

//use 1k ohm and 3.3k ohm as divider
DIO voltage:	 1.16v
DIO led status:	 off
DIO pi status:	 not register

//use 1k ohm and 2k ohm as divider
DIO voltage:	1.6v
DIO led status:	off
DIO pi status:	not register

//use 2k ohm and 2k ohm as divider
DIO voltage:	2.23v
led status:		brightly on
DIO pi status:	not register

//use 2k ohm and 2k ohm as divider
//but input voltage turn to 5.78v
DIO volatege:	2.23v
led status: 	brightly on
DIO pi status:	register

'''
comment: di port will not work in 2.23v situation, but will work in 2.43v situation
'''

//use 2k ohm and 2k ohm as devider
//turning the input voltage from 5.25v slowly up, we detected the minimum register voltage for the dio port will be around 2.33v
//in DIO voltage 2.23v situation, we tested all 8 port will be succeceed registered.

'''
comment: 2.33v can be treat as the DIO register voltage
'''

//the monitor can be done in yotta utility, however, if you want to use pi python language to monitor, below is the syntax:

//install module before use
'''
pip install pymodbus 
'''

//import module
'''
from pymodbus.client.sync import ModbusSerialClient
import time
'''

//define modport
modport='/dev/serial/by-id/usb-ATC_High_Speed_USB_To_RS-485_DAMWDJL-if00-port0'

//initial communication
mymodbus=ModbusSerialClient(method='rtu',port=modport,baudrate=9600)

//initial read coils (must do before change any setting, or will abort error)
mymodbus.read_coils(0,count=8,unit=1)

//change the reaction time of DIO port to be 0.1s
mymodbus.socket.timeout=0.1

//status=mymodbus.read_coils(0,count=8,unit=1)
read coils agaain

//show all 8 port register status
print status.bits

'''
!!!last but most important!!!
since this test is under input voltage 5v for DIO,
you can actually change DIO port linkage(not psu linkage!!!) without poweroff,
so that communication will not lost, and you are not neccssary to setup again.
but if we choose to test under input voltage 25v for DIO,
all the changing of wiring must be down when the whole thing power is off!!!
stay safe and have fun :)
'''
